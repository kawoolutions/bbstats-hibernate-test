<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <h:form id="prevent-unload-form">
        <h:inputHidden id="unload-warning"
                       value="#{msg['common.javascript.preventUnload.warning']}" />
    </h:form>
            
    <script type="text/javascript">
        function preventUnload( state )
        {
            if ( typeof statusDialog !== "undefined" )
            {
                statusDialog.hide();
            }
            
            unloadMessage = new String( document.getElementById( "prevent-unload-form:unload-warning" ).value );
            window.onbeforeunload = state ? function() { if ( typeof statusDialog !== "undefined" ) { statusDialog.hide(); } return unloadMessage; } : null;     
        }                 
    </script>
    
</ui:composition>